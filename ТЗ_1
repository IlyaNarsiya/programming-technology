#!/bin/bash
input_dir=$1
output_dir=$2
if [[ -z "$input_dir" || -z "$output_dir" ]]; then
    echo "Usage: $0 <input_directory> <output_directory>"
    exit 1
fi
mkdir -p "$output_dir"
while IFS= read -r -d '' file; do
    base_name=$(basename -- "$file")
    destination="$output_dir/$base_name"
    counter=1
    while [[ -e "$destination" ]]; do
        destination="${output_dir}/${base_name%.*}_$counter.${base_name##*.}"
        ((counter++))
    done
    cp "$file" "$destination"
done < <(find "$input_dir" -type f -print0)
echo "All files have been copied to $output_dir"
